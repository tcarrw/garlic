<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>garlic Â· sigrid â†” mirrorhoney</title>
<style>
:root{--bg:#0b0c10;--ink:#fff;--soft:#ffc83d;--line:rgba(255,255,255,.12);--veil:rgba(12,12,18,.9);--pane:rgba(255,255,255,.08)}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
.wrap{min-height:100%;display:flex;flex-direction:column}
.main{flex:1;display:flex;align-items:center;justify-content:center;padding:28px;text-align:center}
h1{font-size:1.25rem;margin:0 0 8px 0;font-weight:600;letter-spacing:.01em}
.lead{opacity:.85;margin:2px 0}
.tag{display:inline-flex;gap:8px;align-items:center;background:var(--pane);border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-size:.88rem;margin-top:10px}
.badge{position:fixed;left:16px;bottom:16px;background:var(--pane);border:1px solid var(--line);backdrop-filter:blur(8px);border-radius:999px;padding:10px 14px;cursor:pointer;display:flex;gap:8px;align-items:center}
.holder{position:fixed;right:16px;bottom:16px;background:linear-gradient(180deg,#ffe07a,#ffc83d);color:#2b2300;border:1px solid rgba(0,0,0,.25);border-radius:999px;padding:10px 14px;cursor:pointer;display:flex;gap:8px;align-items:center}
.panel{position:fixed;inset:0;display:none;align-items:flex-end;justify-content:center;background:linear-gradient(180deg,transparent,rgba(0,0,0,.45));z-index:30}
.sheet{width:100%;max-width:640px;background:var(--veil);border:1px solid var(--line);border-radius:18px 18px 0 0;padding:16px 16px 22px}
.row{display:flex;align-items:center;justify-content:space-between;padding:10px;border-bottom:1px dashed var(--line);gap:10px}
.btn{background:var(--pane);border:1px solid var(--line);border-radius:10px;padding:9px 12px;color:var(--ink);cursor:pointer}
.btn.yellow{background:linear-gradient(180deg,#ffe07a,#ffc83d);color:#2b2300;border:1px solid rgba(0,0,0,.2)}
.dim{opacity:.75}
.input{background:transparent;border:none;border-bottom:1px solid var(--ink);outline:none;color:var(--ink);padding:6px 4px;width:100%;font-size:1rem;text-align:center}
.klabel{display:flex;align-items:center;gap:8px;font-weight:600}
#playerWrap{position:relative;width:100%;aspect-ratio:16/9;background:#000;border-radius:12px;overflow:hidden;margin-top:12px;border:1px solid var(--line)}
#status{margin-top:10px;font-size:.92rem}
.ok{color:#c6f6c6}
.hidden{display:none}
.footer{padding:12px;text-align:center;opacity:.6;font-size:.85rem}
a{color:inherit}
</style>
</head>
<body>
<div class="wrap">
  <div class="main">
    <div>
      <h1>Velkommen.</h1>
      <p class="lead">Sigrid holder nÃ¸kkelen. Hvis resonansen er ekte, kan hun gi tilgang til MirrorHoney.</p>
      <p class="lead">Welcome, wanderer. Watch the piece below â€” all of it â€” then request access.</p>
      <div class="tag">holder: Sigrid â†’ Marina Â· key: <span style="color:var(--soft);font-weight:600">yellow</span></div>
    </div>
  </div>

  <div class="footer">garlic Â· field of clarity</div>
</div>

<div id="watchBadge" class="badge">ðŸŽ¥ <span>watch to request access</span></div>
<div id="panelWatch" class="panel">
  <div class="sheet">
    <div class="row"><div class="klabel">ðŸŽ¥ Sigrid â€” Primadonna <span id="meta" class="dim"></span></div><button id="closeWatch" class="btn">close</button></div>
    <div id="playerWrap"><div id="player"></div></div>
    <div id="status" class="dim">press play</div>
    <div class="row">
      <button id="requestBtn" class="btn yellow hidden">request access â†’ mirrorhoney</button>
      <div id="reqMsg" class="dim"></div>
    </div>
  </div>
</div>

<div id="holderBadge" class="holder">ðŸ”‘ <span>holder</span></div>
<div id="panelHolder" class="panel">
  <div class="sheet">
    <div class="row"><div class="klabel">ðŸ”‘ Yellow Key â€” holder panel</div><button id="closeHolder" class="btn">close</button></div>
    <div class="row"><input id="who" class="input" placeholder="type: sigrid"><button id="okWho" class="btn">enter</button></div>
    <div id="holderOps" class="hidden">
      <div class="row"><div class="dim">video id</div>
        <div style="display:flex;gap:8px;align-items:center;width:60%">
          <input id="ytInput" class="input" placeholder="set YouTube ID (once)">
          <button id="ytSet" class="btn">set</button>
        </div>
      </div>
      <div class="row"><div class="dim">grant access</div>
        <div style="display:flex;gap:8px;align-items:center">
          <button id="genLink" class="btn yellow">copy link for Marina</button>
          <span id="linkMsg" class="dim"></span>
        </div>
      </div>
      <div class="row"><div class="dim">note</div><div class="dim">if you resonate, you may grant access</div></div>
    </div>
  </div>
</div>

<script>
const LS_YT="garlic.yt.id",LS_YT_SET="garlic.yt.set"
const panelWatch=document.getElementById("panelWatch"),watchBadge=document.getElementById("watchBadge"),closeWatch=document.getElementById("closeWatch")
const meta=document.getElementById("meta"),status=document.getElementById("status"),requestBtn=document.getElementById("requestBtn"),reqMsg=document.getElementById("reqMsg")
const holderBadge=document.getElementById("holderBadge"),panelHolder=document.getElementById("panelHolder"),closeHolder=document.getElementById("closeHolder")
const who=document.getElementById("who"),okWho=document.getElementById("okWho"),holderOps=document.getElementById("holderOps")
const ytInput=document.getElementById("ytInput"),ytSet=document.getElementById("ytSet"),genLink=document.getElementById("genLink"),linkMsg=document.getElementById("linkMsg")
function jget(k,def){try{return JSON.parse(localStorage.getItem(k)||def)}catch(e){return JSON.parse(def)}}
function jset(k,v){localStorage.setItem(k,JSON.stringify(v))}
function genCode(){return Math.random().toString(36).slice(2,6)+"-"+Math.random().toString(36).slice(2,6)+"-"+Math.random().toString(36).slice(2,6)}
function mhUrl(k){return "https://mirrorhoney.plnt.earth/#k="+encodeURIComponent(k)}
function redirectToMirrorHoney(k){location.href=mhUrl(k)}
function setYTOnce(id){const has=jget(LS_YT_SET,"false");if(has||!id)return false;jset(LS_YT,id);jset(LS_YT_SET,true);return true}
let ytReady=false,player=null,didEnd=false
function ensureYT(){if(ytReady)return;const s=document.createElement("script");s.src="https://www.youtube.com/iframe_api";document.body.appendChild(s)}
function buildPlayer(){const vid=jget(LS_YT,'""');meta.textContent=vid?("youtube.com/watch?v="+vid):"video id not set";if(!vid)return;player=new YT.Player("player",{videoId:vid,playerVars:{rel:0,modestbranding:1,playsinline:1,origin:location.origin},events:{onStateChange:e=>{if(e.data===YT.PlayerState.PLAYING){status.textContent="playing"}if(e.data===YT.PlayerState.ENDED){didEnd=true;requestBtn.classList.remove("hidden");status.textContent="complete";status.classList.add("ok")}}})}
window.onYouTubeIframeAPIReady=function(){ytReady=true;buildPlayer()}
watchBadge.addEventListener("click",()=>{panelWatch.style.display="flex";ensureYT();if(ytReady&&!player)buildPlayer()})
closeWatch.addEventListener("click",()=>{panelWatch.style.display="none"})
panelWatch.addEventListener("click",e=>{if(e.target===panelWatch)panelWatch.style.display="none"})
requestBtn.addEventListener("click",()=>{if(!didEnd){reqMsg.textContent="finish the video first";return}const k=genCode();reqMsg.textContent="opening mirrorhoneyâ€¦";redirectToMirrorHoney(k)})
holderBadge.addEventListener("click",()=>{panelHolder.style.display="flex"})
closeHolder.addEventListener("click",()=>{panelHolder.style.display="none"})
panelHolder.addEventListener("click",e=>{if(e.target===panelHolder)panelHolder.style.display="none"})
okWho.addEventListener("click",()=>{const v=(who.value||"").trim().toLowerCase();if(v==="sigrid"){holderOps.classList.remove("hidden");who.value="";}})
ytSet.addEventListener("click",()=>{const v=(ytInput.value||"").trim();if(setYTOnce(v)){meta.textContent="youtube.com/watch?v="+v;ytInput.value=""}})
genLink.addEventListener("click",()=>{const k=genCode();navigator.clipboard.writeText(mhUrl(k));linkMsg.textContent="copied"})
window.addEventListener("load",()=>{const vid=jget(LS_YT,'""');if(vid)meta.textContent="youtube.com/watch?v="+vid})
</script>
</body>
</html>
