<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Garlic.plnt.earth ‚Äî Sigrid‚Äôs Kitchen (Garlic Mode)</title>
<link rel="canonical" href="https://garlic.plnt.earth/">
<meta name="description" content="Garlic.plnt.earth ‚Äî cozy garlic rituals + a consent-based illuminating tone. Includes a ready-to-copy Norwegian comment for Sigrid." />
<meta name="color-scheme" content="dark light" />
<meta name="theme-color" content="#ffe08a" />
<meta name="robots" content="index,follow" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Garlic.plnt.earth ‚Äî Sigrid‚Äôs Kitchen (Garlic Mode)" />
<meta property="og:description" content="Garlic meter, steps, timer, notes, consent-based tone, and a copy-ready Norwegian comment for Sigrid." />
<meta property="og:url" content="https://garlic.plnt.earth/" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Garlic.plnt.earth ‚Äî Sigrid‚Äôs Kitchen" />
<meta name="twitter:description" content="Garlic rituals + illuminating tone. Simple, gentle, bright." />
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cpath fill='%23ffe08a' d='M32 4c2 6-1 10-4 14-4 5-7 10-7 17 0 10 9 17 19 15 9-2 14-11 12-19-2-9-9-12-14-19-2-3-4-6-6-8z'/%3E%3Cpath fill='%239cffd0' d='M26 50c-5-3-8-8-8-15 0-4 1-7 3-10-2 4-1 9 2 12 4 5 12 6 18 2 4-3 6-8 5-13 2 3 3 6 3 9 0 10-8 18-18 18-2 0-3 0-5-1z'/%3E%3C/svg%3E" />
<style>
  :root{
    --bg:#0b0c10; --fg:#eaeaea; --muted:#a9b1ba; --accent:#ffe08a; --accent2:#9cffd0;
    --card:#14161b; --ring:#ffd36b; --ok:#9cffd0;
    --shadow:0 8px 24px rgba(0,0,0,.35); --radius:14px; --gap:14px;
    --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    --sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, "Apple Color Emoji","Segoe UI Emoji";
  }
  @media (prefers-color-scheme: light){
    :root{ --bg:#fffdf7; --fg:#1b1d23; --muted:#5b6470; --card:#ffffff; --shadow:0 8px 24px rgba(0,0,0,.08); }
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0; font-family:var(--sans); background:radial-gradient(1200px 800px at 20% -10%, #2b2f3a22, transparent), var(--bg); color:var(--fg); line-height:1.5}
  header{position:sticky; top:0; z-index:5; backdrop-filter:saturate(120%) blur(10px); background:linear-gradient(180deg, rgba(20,22,27,.8), rgba(20,22,27,.5)); border-bottom:1px solid #ffffff14}
  .bar{max-width:980px; margin:0 auto; display:flex; align-items:center; gap:var(--gap); padding:12px var(--gap)}
  .logo{display:inline-flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.3px}
  .logo .dot{width:12px; height:12px; border-radius:50%; background:conic-gradient(from 210deg, var(--accent), #ffdca8, #fff2c7, var(--accent)); box-shadow:0 0 0 2px #00000025, 0 0 24px 2px #ffd36b55}
  .pill{margin-left:auto; font-size:12px; color:var(--muted); padding:6px 10px; border:1px solid #ffffff20; border-radius:999px}
  main{max-width:980px; margin:24px auto; padding:0 var(--gap); display:grid; gap:var(--gap)}
  .hero{display:grid; gap:14px; grid-template-columns:1fr; align-items:center; padding:18px; background:linear-gradient(180deg, #ffffff06, transparent), var(--card); border:1px solid #ffffff18; border-radius:var(--radius); box-shadow:var(--shadow)}
  .hero h1{margin:0; font-size:28px}
  .hero p{margin:0; color:var(--muted)}
  .grid{display:grid; gap:var(--gap)}
  @media (min-width:900px){ .grid{ grid-template-columns: 1.2fr .8fr } }
  .card{background:var(--card); border:1px solid #ffffff18; border-radius:var(--radius); box-shadow:var(--shadow); padding:16px; display:grid; gap:12px}
  .label{font-size:12px; letter-spacing:.4px; text-transform:uppercase; color:var(--muted)}
  .meter{display:grid; gap:10px}
  .track{height:14px; border-radius:999px; background:linear-gradient(90deg, #d9fff0 0%, #fff6c0 50%, #ffd3a2 75%, #ffb07a 90%, #ff8e5a 100%); position:relative; overflow:hidden; border:1px solid #ffffff28}
  .thumb{position:absolute; top:-6px; transform:translateX(-50%); width:24px; height:24px; border-radius:50%; border:2px solid #00000050; background:radial-gradient(circle at 35% 35%, #fff, #ffe6a5); box-shadow:0 6px 16px rgba(0,0,0,.35), 0 0 0 3px #00000010; transition:left .15s ease}
  input[type=range]{width:100%}
  .meter .readout{display:flex; justify-content:space-between; font-family:var(--mono); font-size:14px}
  .steps{display:grid; gap:10px}
  .step{padding:12px; border:1px dashed #ffffff28; border-radius:12px; background:#ffffff06}
  .step strong{display:block; margin-bottom:6px}
  .timer{display:flex; gap:10px; align-items:center; justify-content:space-between; padding:12px; border-radius:12px; background:#ffffff06; border:1px solid #ffffff18; font-family:var(--mono)}
  .btn{appearance:none; border:1px solid #ffffff24; background:#ffffff0a; color:var(--fg); padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:600}
  .btn:focus{outline:2px solid var(--ring); outline-offset:2px}
  .btn[aria-pressed=true]{background:#ffffff16}
  .note{width:100%; min-height:120px; padding:12px; resize:vertical; border-radius:10px; border:1px solid #ffffff24; background:#ffffff06; color:var(--fg); font-family:var(--sans)}
  .footer{display:flex; gap:10px; align-items:center; justify-content:space-between; color:var(--muted); font-size:12px; padding:6px var(--gap) 24px}
  .tag{padding:5px 10px; border-radius:999px; border:1px solid #ffffff24; color:var(--muted)}
  details summary{cursor:pointer}
  .ghost{display:inline-block; padding:4px 8px; border-radius:8px; border:1px solid #ffffff20; background:#ffffff08; font-size:12px; color:var(--muted)}
  noscript{display:block; margin:10px 0; color:var(--muted); font-size:14px}
  .small{font-size:12px; color:var(--muted)}
</style>
</head>
<body>
  <header>
    <div class="bar" role="navigation" aria-label="site">
      <div class="logo"><span class="dot" aria-hidden="true"></span> Garlic.plnt.earth <span aria-hidden="true">¬∑</span> Sigrid‚Äôs Kitchen</div>
      <span class="pill">gentle ¬∑ bright ¬∑ simple</span>
    </div>
  </header>

  <main>
    <section class="hero" aria-labelledby="h1">
      <div>
        <h1 id="h1">‚Äúthe light‚Äôs already here ‚Äî in the garlic.‚Äù</h1>
        <p>Quick, cozy rituals for turning cloves into comfort. A tiny space for Sigrid-style cooking: tidy steps, bright flavors, a playful garlic meter ‚Äî and a consent-based illuminating tone.</p>
        <noscript>JavaScript is off ‚Äî the meter, timer, tone, and notes won‚Äôt work.</noscript>
      </div>
      <div class="ghost" aria-live="polite" id="status">Ready ¬∑ Roast: medium (65%) ¬∑ Timer: 00:00</div>
    </section>

    <section class="grid" aria-label="workspace">
      <div class="card">
        <div class="label">Garlic Meter</div>
        <div class="meter" aria-live="polite">
          <div class="track" id="track" aria-hidden="true"><div class="thumb" id="thumb" style="left:65%"></div></div>
          <input id="meter" type="range" min="0" max="100" value="65" aria-label="Roast level (0 to 100)">
          <div class="readout"><span id="levelWord">medium</span><span><span id="levelVal">65</span>%</span></div>
          <details>
            <summary>What does the meter mean?</summary>
            <ul>
              <li><strong>0‚Äì25%</strong> raw / punchy ‚Äî dressings, aioli</li>
              <li><strong>26‚Äì55%</strong> saut√© / sweetening ‚Äî soups, sauces</li>
              <li><strong>56‚Äì85%</strong> roast / jammy ‚Äî spreads, veg, toast</li>
              <li><strong>86‚Äì100%</strong> confit / mellow ‚Äî pastas, dips</li>
            </ul>
          </details>
        </div>

        <div class="label">Timer</div>
        <div class="timer" role="group" aria-label="timer controls">
          <div id="clock">00:00</div>
          <div>
            <button class="btn" id="start">Start</button>
            <button class="btn" id="pause">Pause</button>
            <button class="btn" id="reset">Reset</button>
          </div>
        </div>

        <div class="label">Drop-in Video (optional)</div>
        <div class="step">
          <strong>Paste a YouTube ID</strong>
          <input id="yt" inputmode="latin" placeholder="e.g., DdgyifI5k9o" aria-label="YouTube video id"
                 style="width:100%;padding:10px;border-radius:10px;border:1px solid #ffffff24;background:#ffffff06;color:var(--fg)">
          <button class="btn" id="mount">Mount Player</button>
          <div id="playerWrap" style="margin-top:10px; aspect-ratio:16/9; border-radius:12px; overflow:hidden; border:1px solid #ffffff18; background:#00000020"></div>
          <small class="muted" style="color:var(--muted)">Privacy-enhanced embed; nothing loads until you click ‚ÄúMount Player.‚Äù</small>
        </div>
      </div>

      <aside class="card">
        <div class="label">Recipe ¬∑ Jammy Garlic Toast</div>
        <div class="steps" aria-label="steps">
          <div class="step"><strong>1) Warm the pan</strong> medium-low heat, a spoon of olive oil, optional butter.</div>
          <div class="step"><strong>2) Add sliced garlic</strong> keep it moving; aim for <em>light blond</em>, not brown.</div>
          <div class="step"><strong>3) Sweeten</strong> pinch of salt; add a splash of water if it dries, let it go jammy.</div>
          <div class="step"><strong>4) Finish</strong> lemon zest, parsley, black pepper. Spoon over toast.</div>
        </div>

        <div class="label">Notes</div>
        <textarea id="notes" class="note" placeholder="Your tweaks, timings, who you cooked for‚Ä¶"></textarea>
        <button class="btn" id="save">Save Notes</button>
        <small class="muted" style="color:var(--muted)">Notes save locally in your browser.</small>

        <div class="label">Share</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <a class="tag" id="share" href="#" role="button" aria-label="Copy a summary with link">Copy a tiny summary</a>
          <span class="tag">#garlicmode</span><span class="tag">#sigridskitchen</span>
        </div>
      </aside>
    </section>

    <!-- Illuminating Tone (Consent-Based) -->
    <section class="card" aria-label="illuminating tone">
      <div class="label">Illuminating Tone (consent first)</div>
      <p class="small">gentle, breath-paced, with soft fade-in/out and a tiny vibrato. requires your consent and a tap to start.</p>

      <div role="group" aria-label="tone controls" style="display:grid;gap:10px">
        <label class="step" style="display:flex;align-items:center;gap:10px">
          <input id="toneConsent" type="checkbox" />
          <span><strong>I consent</strong> to play a gentle tone (headphones low at first).</span>
        </label>

        <div class="step" style="display:grid;gap:8px">
          <strong>Frequency</strong>
          <input id="freq" type="range" min="40" max="960" value="128" />
          <div class="readout" style="display:flex;justify-content:space-between;font-family:var(--mono)">
            <span><button class="btn" data-preset="128">128 Hz</button> <button class="btn" data-preset="160">160 Hz</button> <button class="btn" data-preset="256">256 Hz</button></span>
            <span><span id="freqVal">128</span> Hz</span>
          </div>
        </div>

        <div class="step" style="display:grid;gap:8px">
          <strong>Warmth &amp; Vibrato</strong>
          <label class="small">shimmer (very low 2nd harmonic) <input id="shimmer" type="checkbox" checked></label>
          <label class="small">vibrato rate <input id="vibRate" type="range" min="0" max="2" step="0.05" value="0.6"></label>
          <label class="small">vibrato depth <input id="vibDepth" type="range" min="0" max="8" step="0.1" value="2"></label>
        </div>

        <div class="step" style="display:grid;gap:8px">
          <strong>Level</strong>
          <input id="gain" type="range" min="0" max="100" value="28" />
          <div class="small">starts very low, please raise gently. safety limit and soft ramps applied.</div>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn" id="toneStart">Start</button>
          <button class="btn" id="toneStop">Stop</button>
          <button class="btn" id="tonePanic" aria-label="immediate mute">Panic Mute</button>
          <span class="ghost" id="toneState">silent</span>
        </div>
      </div>
    </section>

    <!-- Pop-icon Relaxation Note -->
    <section class="card" aria-label="pop icon relaxation note">
      <div class="label">Pop-icon Relaxation Note</div>
      <p class="small" style="margin-top:0">
        <strong>EN:</strong> <em>optimal relaxation + internal vibration:</em> glow first, go second. headphones low, soft jaw, 4‚Äì6 breath. start <strong>128 Hz</strong>, light shimmer, tiny vibrato (~0.6 Hz). let the body hum‚Äîno forcing, all consent. üßÑüí´
      </p>
      <p class="small">
        <strong>NO:</strong> <em>optimal avslapning + indre vibrasjon:</em> gl√∏d f√∏rst, steg etterp√•. hodetelefoner lavt, myk kjeve, 4‚Äì6 pust. start <strong>128 Hz</strong>, lett shimmer, liten vibrato (~0,6 Hz). la kroppen summe‚Äîuten press, alt p√• samtykke. üßÑüí´
      </p>
    </section>

    <!-- Norwegian Invite (Copy-ready #2 + link) -->
    <section class="card" aria-label="norwegian tiktok comment">
      <div class="label">Copy comment for TikTok (Sigrid)</div>
      <p class="small" style="margin:0 0 8px">This is option <strong>#2</strong> (roast-me vibe) with your link appended.</p>
      <pre style="margin:0;white-space:pre-wrap;font-family:var(--sans);background:#ffffff06;border:1px solid #ffffff18;border-radius:12px;padding:12px">
jeg kan ikke norsk, s√• du f√•r gjerne grille meg ‚Äî men du er r√•kul, og jeg vil endre verden sammen med deg. üßÑ‚ú®
garlic.plnt.earth</pre>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
        <button class="btn" id="copyNO2">Copy TikTok comment</button>
        <span class="ghost" id="noCopyStatus">ready</span>
      </div>
    </section>

    <section class="card" aria-label="about">
      <div class="label">About Garlic.plnt.earth</div>
      <p>A tiny, friendly kitchen page: simple defaults, no distractions. The garlic meter maps to technique; the tone is for calm focus. ‚ÄúThe guy is in the garlic‚Äù is our wink: the magic‚Äôs already here.</p>
    </section>
  </main>

  <footer class="footer">
    <span>Made with ‚ò∫ for Sigrid ¬∑ garlic, light, and laughter</span>
    <span class="ghost">Garlic.plnt.earth</span>
  </footer>

<script>
(function(){
  // ----- Garlic Meter -----
  var meter = document.getElementById('meter');
  var levelVal = document.getElementById('levelVal');
  var levelWord = document.getElementById('levelWord');
  var thumb = document.getElementById('thumb');
  var status = document.getElementById('status');
  function wordFor(v){ v=+v; if(v<=25)return'raw'; if(v<=55)return'gentle'; if(v<=85)return'roast'; return'confit'; }
  function updateMeter(){
    var v = meter.value; levelVal.textContent=v; levelWord.textContent=wordFor(v); thumb.style.left=v+'%';
    var t = document.getElementById('clock') ? document.getElementById('clock').textContent : '00:00';
    status.textContent='Ready ¬∑ Roast: '+wordFor(v)+' ('+v+'%) ¬∑ Timer: '+t;
  }
  meter.addEventListener('input', updateMeter); updateMeter();

  // ----- Timer -----
  var startBtn = document.getElementById('start');
  var pauseBtn = document.getElementById('pause');
  var resetBtn = document.getElementById('reset');
  var clock = document.getElementById('clock');
  var t0=null, acc=0, raf=null, running=false;
  function fmt(ms){ var s=Math.floor(ms/1000), m=Math.floor(s/60); s%=60; return (m<10?'0':'')+m+':'+(s<10?'0':'')+s; }
  function tick(ts){ if(!t0)t0=ts; var elapsed=acc+(ts-t0); clock.textContent=fmt(elapsed); if(running)raf=requestAnimationFrame(tick); }
  startBtn.addEventListener('click', function(){ if(running)return; running=true; t0=null; raf=requestAnimationFrame(tick);
    startBtn.setAttribute('aria-pressed','true'); pauseBtn.setAttribute('aria-pressed','false'); });
  pauseBtn.addEventListener('click', function(){ if(!running)return; running=false; var p=clock.textContent.split(':'); acc=(+p[0]*60+ +p[1])*1000;
    cancelAnimationFrame(raf); startBtn.setAttribute('aria-pressed','false'); pauseBtn.setAttribute('aria-pressed','true'); });
  resetBtn.addEventListener('click', function(){ running=false; t0=null; acc=0; clock.textContent='00:00'; cancelAnimationFrame(raf);
    startBtn.setAttribute('aria-pressed','false'); pauseBtn.setAttribute('aria-pressed','false'); updateMeter(); });

  // ----- Notes -----
  var notes = document.getElementById('notes'); var save = document.getElementById('save'); var KEY='garlic.plnt.earth.notes.v1';
  try{ notes.value = localStorage.getItem(KEY)||''; }catch(e){}
  save.addEventListener('click', function(){ try{ localStorage.setItem(KEY, notes.value); status.textContent='Saved notes ¬∑ '+new Date().toLocaleTimeString(); }catch(e){} });

  // ----- Share summary -----
  var share = document.getElementById('share');
  share.addEventListener('click', function(ev){
    ev.preventDefault();
    var text='Garlic Mode ‚Äî '+levelWord.textContent+' ('+levelVal.textContent+'%) ¬∑ '+document.getElementById('clock').textContent+' ¬∑ https://garlic.plnt.earth';
    if(notes && notes.value.trim()) text+=' ¬∑ note: '+notes.value.trim().slice(0,80);
    if(navigator.clipboard) navigator.clipboard.writeText(text);
    status.textContent='Copied summary with link';
  });

  // ----- YouTube Mount -----
  var yt = document.getElementById('yt'); var mount = document.getElementById('mount'); var wrap = document.getElementById('playerWrap');
  mount.addEventListener('click', function(){
    var id=(yt.value||'').trim();
    if(!id){ wrap.innerHTML='<div style="padding:20px;color:var(--muted)">Add a YouTube ID to mount.</div>'; return; }
    var src='https://www.youtube-nocookie.com/embed/'+encodeURIComponent(id);
    wrap.innerHTML='<iframe title="Video" width="100%" height="100%" allow="autoplay; encrypted-media; picture-in-picture" allowfullscreen frameborder="0" src="'+src+'"></iframe>';
  });

  // ----- Consent-based WebAudio Tone -----
  var AudioC = window.AudioContext || window.webkitAudioContext;
  var ctx=null, osc=null, osc2=null, gain=null, lfo=null, lfoGain=null, limiter=null, stopTimer=null;
  var consent = document.getElementById('toneConsent');
  var fSlider = document.getElementById('freq'); var fVal = document.getElementById('freqVal');
  var gSlider = document.getElementById('gain');
  var shimmer = document.getElementById('shimmer');
  var vibRate = document.getElementById('vibRate'); var vibDepth = document.getElementById('vibDepth');
  var startTone = document.getElementById('toneStart'); var stopTone = document.getElementById('toneStop'); var panic = document.getElementById('tonePanic'); var tState=document.getElementById('toneState');

  function setState(s){ tState.textContent=s; }
  function ensureCtx(){
    if(!ctx){ ctx = new AudioC({latencyHint:'interactive', sampleRate: 48000}); }
    if(ctx.state==='suspended'){ return ctx.resume(); }
    return Promise.resolve();
  }
  function disconnectGraph(){
    try{ if(osc){ osc.stop(); osc.disconnect(); } }catch(e){}
    try{ if(osc2){ osc2.stop(); osc2.disconnect(); } }catch(e){}
    try{ if(lfo){ lfo.stop(); lfo.disconnect(); } }catch(e){}
    try{ if(lfoGain){ lfoGain.disconnect(); } }catch(e){}
    try{ if(limiter){ limiter.disconnect(); } }catch(e){}
    try{ if(gain){ gain.disconnect(); } }catch(e){}
    osc=osc2=lfo=lfoGain=gain=limiter=null;
    clearTimeout(stopTimer);
  }
  function connectGraph(freq){
    disconnectGraph();
    gain = ctx.createGain(); gain.gain.value = 0.0001;
    var ws = ctx.createWaveShaper(); ws.curve = (function(){
      var n=65536, curve=new Float32Array(n);
      for(var i=0;i<n;i++){ var x=i/(n-1)*2-1; curve[i]=Math.tanh(1.6*x); }
      return curve;
    })();
    limiter = ws;

    osc = ctx.createOscillator(); osc.type='sine'; osc.frequency.value=freq;

    lfo = ctx.createOscillator(); lfo.type='sine'; lfo.frequency.value=+vibRate.value;
    lfoGain = ctx.createGain(); lfoGain.gain.value=(+vibDepth.value);
    lfo.connect(lfoGain); lfoGain.connect(osc.detune);

    if(shimmer.checked){
      osc2 = ctx.createOscillator(); osc2.type='sine'; osc2.frequency.value=freq*2;
      var g2 = ctx.createGain(); g2.gain.value = 0.08;
      osc2.connect(g2).connect(gain);
    } else { osc2=null; }

    osc.connect(gain); gain.connect(limiter); limiter.connect(ctx.destination);
  }
  function ramp(target, seconds){
    var now=ctx.currentTime;
    gain.gain.cancelScheduledValues(now);
    gain.gain.setValueAtTime(gain.gain.value, now);
    gain.gain.linearRampToValueAtTime(target, now+seconds);
  }
  function startAudio(){
    if(!consent.checked){ setState('need consent'); return; }
    ensureCtx().then(function(){
      var f=+fSlider.value; connectGraph(f);
      osc.start(); lfo.start(); if(osc2) osc2.start();
      var lvl = (+gSlider.value)/100 * 0.2; if(lvl<0.01) lvl=0.01;
      ramp(lvl, 2.0);
      setState('playing');
      clearTimeout(stopTimer); stopTimer = setTimeout(stopAudio, 15*60*1000);
    });
  }
  function stopAudio(){
    if(!ctx || !gain){ setState('silent'); return; }
    var now=ctx.currentTime;
    try{
      gain.gain.cancelScheduledValues(now);
      gain.gain.setValueAtTime(gain.gain.value, now);
      gain.gain.linearRampToValueAtTime(0.0001, now+1.8);
      setTimeout(disconnectGraph, 1900);
      setState('stopping');
    }catch(e){ disconnectGraph(); setState('silent'); }
  }
  function panicMute(){
    try{ if(gain){ gain.gain.value=0.000001; } }catch(e){}
    disconnectGraph(); setState('muted');
  }

  fSlider.addEventListener('input', function(){ fVal.textContent=fSlider.value; if(osc){ osc.frequency.value=+fSlider.value; if(osc2) osc2.frequency.value=+fSlider.value*2; } });
  gSlider.addEventListener('input', function(){ if(!ctx || !gain) return; var lvl = (+gSlider.value)/100 * 0.2; if(lvl<0.005) lvl=0.005; var now=ctx.currentTime; gain.gain.cancelScheduledValues(now); gain.gain.linearRampToValueAtTime(lvl, now+0.2); });
  vibRate.addEventListener('input', function(){ if(lfo){ lfo.frequency.value=+vibRate.value; } });
  vibDepth.addEventListener('input', function(){ if(lfoGain){ lfoGain.gain.value=+vibDepth.value; } });
  shimmer.addEventListener('change', function(){
    if(!ctx) return;
    if(osc && shimmer.checked && !osc2){ osc2 = ctx.createOscillator(); osc2.type='sine'; osc2.frequency.value=+fSlider.value*2; var g2=ctx.createGain(); g2.gain.value=0.08; osc2.connect(g2).connect(gain); osc2.start(); }
    if(osc && !shimmer.checked && osc2){ try{ osc2.stop(); osc2.disconnect(); }catch(e){} osc2=null; }
  });

  [].forEach.call(document.querySelectorAll('button[data-preset]'), function(b){
    b.addEventListener('click', function(){
      var v = +b.getAttribute('data-preset'); fSlider.value=v; fVal.textContent=v;
      if(osc){ osc.frequency.value=v; if(osc2) osc2.frequency.value=v*2; }
    });
  });

  document.getElementById('toneStart').addEventListener('click', startAudio);
  document.getElementById('toneStop').addEventListener('click', stopAudio);
  document.getElementById('tonePanic').addEventListener('click', panicMute);
  document.addEventListener('visibilitychange', function(){ if(document.hidden){ stopAudio(); } });

  // ----- Copy Norwegian #2 with link -----
  var s = document.getElementById('noCopyStatus');
  document.getElementById('copyNO2').addEventListener('click', function(){
    var text = "jeg kan ikke norsk, s√• du f√•r gjerne grille meg ‚Äî men du er r√•kul, og jeg vil endre verden sammen med deg. üßÑ‚ú®\ngarlic.plnt.earth";
    if(navigator.clipboard){ navigator.clipboard.writeText(text); s.textContent='copied'; setTimeout(function(){s.textContent='ready';}, 1400); }
  });

})();
</script>
</body>
</html>
